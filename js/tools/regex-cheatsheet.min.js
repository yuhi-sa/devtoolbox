"use strict";
(function () {
document.addEventListener("DOMContentLoaded", function () {
var searchInput = document.getElementById("rc-search");
var categorySelect = document.getElementById("rc-category");
var tbody = document.getElementById("rc-tbody");
var emptyEl = document.getElementById("rc-empty");
var data = [
{ category: "basic", syntax: ".", desc: "改行以外の任意の1文字にマッチ", example: "a.c", sample: "abc", match: "abc" },
{ category: "basic", syntax: "\\d", desc: "数字（0-9）にマッチ", example: "\\d+", sample: "abc123", match: "123" },
{ category: "basic", syntax: "\\D", desc: "数字以外にマッチ", example: "\\D+", sample: "abc123", match: "abc" },
{ category: "basic", syntax: "\\w", desc: "英数字とアンダースコアにマッチ", example: "\\w+", sample: "hello_world!", match: "hello_world" },
{ category: "basic", syntax: "\\W", desc: "\\w以外にマッチ", example: "\\W", sample: "hello world", match: " " },
{ category: "basic", syntax: "\\s", desc: "空白文字にマッチ", example: "\\s", sample: "a b", match: " " },
{ category: "basic", syntax: "\\S", desc: "空白以外にマッチ", example: "\\S+", sample: " hello ", match: "hello" },
{ category: "basic", syntax: "\\\\", desc: "バックスラッシュのエスケープ", example: "\\\\n", sample: "\\n", match: "\\n" },
{ category: "basic", syntax: "|", desc: "OR（論理和）", example: "cat|dog", sample: "I have a cat", match: "cat" },
{ category: "quantifiers", syntax: "*", desc: "0回以上の繰り返し", example: "ab*c", sample: "ac abc abbc", match: "ac, abc, abbc" },
{ category: "quantifiers", syntax: "+", desc: "1回以上の繰り返し", example: "ab+c", sample: "ac abc abbc", match: "abc, abbc" },
{ category: "quantifiers", syntax: "?", desc: "0回または1回", example: "colou?r", sample: "color colour", match: "color, colour" },
{ category: "quantifiers", syntax: "{n}", desc: "ちょうどn回", example: "\\d{3}", sample: "12 123 1234", match: "123, 123" },
{ category: "quantifiers", syntax: "{n,}", desc: "n回以上", example: "\\d{2,}", sample: "1 12 123", match: "12, 123" },
{ category: "quantifiers", syntax: "{n,m}", desc: "n回以上m回以下", example: "\\d{2,4}", sample: "1 12 123 12345", match: "12, 123, 1234" },
{ category: "quantifiers", syntax: "*?", desc: "0回以上（最短マッチ）", example: "<.*?>", sample: "<b>text</b>", match: "<b>, </b>" },
{ category: "quantifiers", syntax: "+?", desc: "1回以上（最短マッチ）", example: "a+?", sample: "aaaa", match: "a" },
{ category: "character-classes", syntax: "[abc]", desc: "a, b, cのいずれか", example: "[aeiou]", sample: "hello", match: "e, o" },
{ category: "character-classes", syntax: "[^abc]", desc: "a, b, c以外", example: "[^aeiou]", sample: "hello", match: "h, l, l" },
{ category: "character-classes", syntax: "[a-z]", desc: "a～zの範囲", example: "[a-z]+", sample: "Hello World", match: "ello, orld" },
{ category: "character-classes", syntax: "[A-Z]", desc: "A～Zの範囲", example: "[A-Z]", sample: "Hello", match: "H" },
{ category: "character-classes", syntax: "[0-9]", desc: "0～9の範囲（\\dと同等）", example: "[0-9]+", sample: "abc123", match: "123" },
{ category: "character-classes", syntax: "[a-zA-Z0-9]", desc: "英数字", example: "[a-zA-Z0-9]+", sample: "user@123", match: "user, 123" },
{ category: "character-classes", syntax: "[\\p{L}]", desc: "Unicode文字（uフラグ必須）", example: "[\\p{L}]+", sample: "Hello\u3053\u3093\u306b\u3061\u306f", match: "Hello\u3053\u3093\u306b\u3061\u306f" },
{ category: "anchors", syntax: "^", desc: "行頭にマッチ", example: "^Hello", sample: "Hello World", match: "Hello" },
{ category: "anchors", syntax: "$", desc: "行末にマッチ", example: "World$", sample: "Hello World", match: "World" },
{ category: "anchors", syntax: "\\b", desc: "単語の境界にマッチ", example: "\\bcat\\b", sample: "cat cats concatenate", match: "cat" },
{ category: "anchors", syntax: "\\B", desc: "単語の境界以外にマッチ", example: "\\Bcat\\B", sample: "concatenate", match: "cat" },
{ category: "groups", syntax: "(abc)", desc: "キャプチャグループ", example: "(\\d{3})-(\\d{4})", sample: "123-4567", match: "123-4567 (1:123, 2:4567)" },
{ category: "groups", syntax: "(?:abc)", desc: "非キャプチャグループ", example: "(?:ab)+", sample: "ababab", match: "ababab" },
{ category: "groups", syntax: "(?<name>abc)", desc: "名前付きキャプチャグループ", example: "(?<year>\\d{4})", sample: "2026", match: "2026 (year:2026)" },
{ category: "groups", syntax: "\\1", desc: "後方参照（1番目のグループ）", example: "(\\w+)\\s\\1", sample: "hello hello", match: "hello hello" },
{ category: "lookaround", syntax: "(?=...)", desc: "肯定先読み", example: "\\d+(?=\u5186)", sample: "100\u5186", match: "100" },
{ category: "lookaround", syntax: "(?!...)", desc: "否定先読み", example: "\\d+(?!\u5186)", sample: "100\u30c9\u30eb", match: "100" },
{ category: "lookaround", syntax: "(?<=...)", desc: "肯定後読み", example: "(?<=\\$)\\d+", sample: "$100", match: "100" },
{ category: "lookaround", syntax: "(?<!...)", desc: "否定後読み", example: "(?<!\\$)\\d+", sample: "\u00a5100", match: "100" },
{ category: "flags", syntax: "g", desc: "グローバル検索（全マッチ）", example: "/a/g", sample: "banana", match: "a, a, a" },
{ category: "flags", syntax: "i", desc: "大文字小文字を無視", example: "/hello/i", sample: "Hello", match: "Hello" },
{ category: "flags", syntax: "m", desc: "複数行モード", example: "/^abc/m", sample: "xyz\\nabc", match: "abc" },
{ category: "flags", syntax: "s", desc: "dotAllモード（.が改行にもマッチ）", example: "/a.b/s", sample: "a\\nb", match: "a\\nb" },
{ category: "flags", syntax: "u", desc: "Unicodeモード", example: "/\\p{L}/u", sample: "\u3042", match: "\u3042" },
{ category: "flags", syntax: "d", desc: "インデックス付きマッチ", example: "/a/d", sample: "abc", match: "a (index:0)" }
];
function escapeHtml(str) {
return str.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;");
}
function renderTable(filteredData) {
tbody.innerHTML = "";
if (filteredData.length === 0) {
emptyEl.style.display = "block";
return;
}
emptyEl.style.display = "none";
var currentCategory = "";
var categoryLabels = {
"basic": "基本パターン",
"quantifiers": "量指定子",
"character-classes": "文字クラス",
"anchors": "アンカー",
"groups": "グループ",
"lookaround": "先読み/後読み",
"flags": "フラグ"
};
filteredData.forEach(function (item) {
if (item.category !== currentCategory) {
currentCategory = item.category;
var headerRow = document.createElement("tr");
var headerCell = document.createElement("td");
headerCell.colSpan = 5;
headerCell.style.cssText = "padding:0.75rem 0.5rem 0.25rem;font-weight:700;font-size:0.95rem;color:var(--color-primary);border-bottom:1px solid var(--color-border);";
headerCell.textContent = categoryLabels[currentCategory] || currentCategory;
headerRow.appendChild(headerCell);
tbody.appendChild(headerRow);
}
var tr = document.createElement("tr");
tr.style.borderBottom = "1px solid var(--color-border)";
var tdSyntax = document.createElement("td");
tdSyntax.style.cssText = "padding:0.5rem;font-family:monospace;font-weight:600;white-space:nowrap;font-size:0.9rem;";
tdSyntax.innerHTML = '<code style="background:var(--color-surface);padding:0.15rem 0.4rem;border-radius:4px;">' + escapeHtml(item.syntax) + '</code>';
tr.appendChild(tdSyntax);
var tdDesc = document.createElement("td");
tdDesc.style.cssText = "padding:0.5rem;font-size:0.85rem;";
tdDesc.textContent = item.desc;
tr.appendChild(tdDesc);
var tdExample = document.createElement("td");
tdExample.style.cssText = "padding:0.5rem;font-family:monospace;font-size:0.85rem;white-space:nowrap;";
tdExample.innerHTML = '<code style="background:var(--color-surface);padding:0.15rem 0.4rem;border-radius:4px;">' + escapeHtml(item.example) + '</code>';
tr.appendChild(tdExample);
var tdMatch = document.createElement("td");
tdMatch.style.cssText = "padding:0.5rem;font-family:monospace;font-size:0.8rem;";
tdMatch.innerHTML = '<span style="color:var(--color-text-secondary);">' + escapeHtml(item.sample) + '</span><br><strong style="color:var(--color-primary);">' + escapeHtml(item.match) + '</strong>';
tr.appendChild(tdMatch);
var tdTry = document.createElement("td");
tdTry.style.cssText = "padding:0.5rem;text-align:center;";
if (item.category !== "flags") {
var tryLink = document.createElement("a");
tryLink.href = "../regex-tester/?pattern=" + encodeURIComponent(item.example);
tryLink.className = "btn btn--secondary";
tryLink.style.cssText = "font-size:0.75rem;padding:0.25rem 0.5rem;text-decoration:none;white-space:nowrap;";
tryLink.textContent = "試す";
tdTry.appendChild(tryLink);
}
tr.appendChild(tdTry);
tbody.appendChild(tr);
});
}
function filterData() {
var searchTerm = searchInput.value.toLowerCase().trim();
var selectedCategory = categorySelect.value;
var filtered = data.filter(function (item) {
var categoryMatch = selectedCategory === "all" || item.category === selectedCategory;
if (!categoryMatch) return false;
if (!searchTerm) return true;
return (
item.syntax.toLowerCase().indexOf(searchTerm) !== -1 ||
item.desc.toLowerCase().indexOf(searchTerm) !== -1 ||
item.example.toLowerCase().indexOf(searchTerm) !== -1 ||
item.match.toLowerCase().indexOf(searchTerm) !== -1
);
});
renderTable(filtered);
}
searchInput.addEventListener("input", filterData);
categorySelect.addEventListener("change", filterData);
renderTable(data);
});
})();